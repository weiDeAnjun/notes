# 概述

![img](https://i-blog.csdnimg.cn/blog_migrate/aba0d8907f542b8d5134c2a4d8f4ee48.png)

## 主存储器



![image-20250618110652126](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618110652126.png)

↓ 对上图解释

为了更快，就要让主存装下更多，为了装更多，所以不装数据，装数据地址，通过地址访问



名词解释

**存储元**：是存 1 位二进制数据（0 或 1）的电子元件，**1 个存储元存 1bit**

**存储单元**：存储元的集合，自然存储的是 二进制串，**每个存储单元对应一个地址**

**地址寄存器（MAR）** ：位数决定主存能有多少个存储单元

比如 MAR 是 4 位，能表示的地址范围是 0~15（二进制 4 位最大是 1111，对应十进制 15 ），所以总共有 24 = 16 个存储单元 。

因为 存储单元 对应地址，可以通过 MAR 找到它 





**存储字（word）**：存储单元里的二进制串 统称（比如存储单元存了 16 位二进制数，这一整串就叫 1 个 “存储字” ）

**存储字长**：表名 存储单元里二进制串的 位数（比如上面说的 16 位，存储字长就是 16 ），**和 MDR 位数相等** 

**MDR** : CPU 读写 数据到主存时，MDR 都要暂存数据（类似 “中转站”，数据进出主存都得经过它 ）。

关键特点：**MDR 的位数 = 存储字长**（存储字长就是一个存储单元能存的二进制位数 ）。比如 MDR 是 16 位，说明一个存储单元能存 16 位二进制数据（也就是 1 个 “字（word）”，1 字 = 16 位 ）。

这说明 MDR 按存储字长来读写



**存储体**：真正存放数据的 “物理空间”



总的来说

存储元 < 存储单元 

存储单元的存储内容 统称 存储字

存储单元的存储内容 长度 = 存储字长

存储单元的存储内容 是标准存储单位



以上单位都不是常用单位，字节才是，所有还要和字节统一单位，进行单位换算



**字节（Byte）**：**1 字节 = 8 位（bit）**，文件大小用 “KB、MB”，本质是字节的换算（1KB = 1024Byte ）







## 运算器+控制器

现代计算机将运算器和控制器集成到一个芯片上，合成为中央处理器，简称CPU

![img](https://i-blog.csdnimg.cn/blog_migrate/59370b5b078eef087414167b20a06ca6.png)



![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/41438ab8fcd23f311c5b1013a4abe6bf.png)





## 计算机软件分类



系统软件包括 操作系统，数据库管理系统，语言处理系统(比如编译器)，分布式软件系统，网络软件系统，标准库系统，服务性系统(比如连接程序)。



**3个语言级别**



机器语言

​	唯一计算机可直接识别的语言

汇编语言

​	单词代替部分二级制指令，转为机器语言

高级语言

​	经编译程序编译为汇编语言，再编译为机器语言





**计算机工作过程**



分为3步，取指令，分析指令，执行指令

![image-20250618114639627](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618114639627.png)

（初始化的过程囊入了取指令部分）

程序累加器PC 指向第一条指令的存储地址，随后送到MAR，MAR根据地址使MDR存储对应位置数据

MDR送到 指令寄存器IR 存放当前指令，IR送到 控制单元 CU，CU分析分析指令并调用其他部件执行

期间执行具体操作(加减（加实现）乘除)，又涉及寻址，根据调用数据

每执行一条指令，PC+1

如此反复，最后会送CU一条停机指令，随后通过中断机制通知操作系统终止该进程



指令和数据都是二进制，CPU如何区分的？

![image-20250618115456885](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618115456885.png)

关于CPU存取速度的比较：寄存器（CPU内部）> Cache(高速的SRAM) > 内存 （SDRAM）









## **计算机性能指标**

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ee87767dc4377de8c9b2d8ede73410d4.png)

大致来说是	 装的容量，算的速度，传的速度





**机器字长（计算机位数）**:计算机进行一次整数运算处理的二进制位数，通常是字节整数倍

| 类别     | 定义                                                         |
| -------- | ------------------------------------------------------------ |
| 机器字长 | 计算机能直接处理的二进制数据的位数，一般等于内部寄存器的大小，决定计算机运算精度 |
| 指令字长 | 一个指令字中包含的二进制代码的位数                           |
| 存储字长 | 一个存储单元存储的二进制代码的长度，等于 MDR（数据寄存器）的位数，是字节整数倍 |
| 数据字长 | 数据总线一次能传送信息的位数，可不等于 MDR 的位数            |

指令字长一般取存储字长的整数倍，若指令字长等于存储字长的2倍，则需要2次访存来取出一条指令，因此取指周期为机器周期的2倍；若指令字长等于存储字长，则取指周期等于机器周期。







**数据通路带宽**
数据总线一次所能传送信息的位数。



**主存容量**
MAR的位数反映存储单元的个数

- MAR 是 16 位 → 主存最多有 216 个存储单元（地址从 `0` 到 `2¹⁶-1`，共 `65536` 个地址，也就是 `64K` 个单元）。
- MDR 是 32 位 → **每个存储单元存 32 位二进制数**（即 1 个存储单元的 “容量” 是 32 位）。

主存总容量 = **存储单元个数 × 每个单元的位数**
代入数值就是：主存容量 = 单元个数 × 每个单元的位数

**例**

如果 MAR 是 20 位，MDR 是 64 位，主存容量是多少？

- 存储单元个数 = 220 = 1M（因为 220=1048576，约 100 万，即 1M）。
- 每个单元的位数 = 64 位 = 8 字节（64 ÷ 8 = 8）。
- 主存总容量 = 220×64 位 = 1*M*×8 字节 = 8MB（因为 1M×8 字节 = 8×1024×1024 字节 = 8MB）。



**MAR 的位数决定 “有多少个存储单元”，MDR 的位数决定 “每个单元存多少位数据”，主存总容量 = 单元个数 × 每个单元的位数**。



吞吐量：系统在单位时间内处理请求的数量 

响应时间：指从用户向计算机发送一个请求，到系统对该请求做出响应并获得所需结构的等待时间





------------

tips:这周期那周期，都是为了表达完成对应事务需要的时间而制造的抽象概念

有始有终，循环往复，叫周期

cpu工作就是这样，开干到完成，然后又来事务，再次开干到完成





CPU的性能取决于三个要素:主频、CPI 、指令条数

CPU时钟频率(主频)：机器内部主时钟的频率，是衡量机器速度的重要参数。



CPU时钟周期：主频倒数(1/周期)，CPU中最小的时间单位，每个动作至少需要1个时钟周期。

CPU周期(机器周期)：由多个时钟周期组成

CPI：执行一条指令所需的时钟周期数，由多个时钟周期组成

指令周期>CPU周期>时钟周期	(规模和耗时)





**CPU执行时间 = 完成1个最小时间单位的时间  = CPU时钟周期数/主频  = (指令条数xCPI)/主频**

2条公式分别是

已知	cpu时钟周期、主频

已知	指令条数、执行一条指令所需时钟周期（知道这两个就知道总时间，然后除以主频）



------------



## 问答



主频高的CPU一定比主频低的CPU快吗？为什么？

衡量CPU运算速度的指标有很多，不能以单独的某个指标来判断CPU。
CPU的主频，即CPU内核工作的时钟频率，表示CPU内数字脉冲信号振荡的速度，主频和实际的运算速度存在一定的关系，但目前还没有一个确定的公式能够定量两者的数值关系，因为CPU的运算速度还要看CPU的流水线的各方面的性能指标（架构、缓存、指令集、CPU的位数、 Cache大小等）。由于主频并不直接代表运算速度，因此在一定情况下很可能会出现主频较高的CPU实际运算速度较低的现象



计算机体系结构和计算机组成的区别和联系是什么？

计算机体系结构是指指令集、数据类型、存储器寻址技术等机器属性，大都属于抽象的属性。
计算机组成是指如何实现计算机体系结构所体现的属性，包含很多硬件细节。例如，指令系统属于结构的问题，但指令的实现（取指令、分析指令、取操作数如何运算等）属于组成的问题。因此，当两台机器指令系统相同时，只能认为它们具有相同的结构，至于这两台机器如何实现其指令，完全可以不同，即可以认为它们的组成方式是不同的。例如，一台机器是否具备乘法指令是一个结构的问题，但实现乘法指令采用什么方式则是一个组成的问题。（简言之，看有没有这个属性，就是结构问题；看怎么实现，就是组成问题）
许多计算机厂商提供一系列体系结构相同的计算机，而它们的组成却有相当大的差别，即使是同一系列的不同型号机器，其性能和价格差异也很大。例如， IBM System/370结构就包含了多种价位和性能的机型。









# 数据表示与运算

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/fbfd556035d1515cb69fb9497f34cbe6.png)



## 进制转换

十进制→其它进制

- **整数部分**：不断除以目标进制的基数（2/8/16），取余数，直到商为 0，余数 从上往下看，从左往右排

- **小数部分**：不断乘以目标进制的基数（2/8/16），取整数部分，直到小数为 0 或达到精度要求，整数部分 从上往下看，从左往右排

其它进制→十进制

当前进制数	各个位乘以权重（权重从右往左，0开始），然后相加

小数部分权重从-1开始



二八

3位一组，转为对应进制数

二十六

4位一组，转为对应进制数

↓

补位规则

- **整数部分**：从二进制数的 **最右边（低位）** 开始，向左每 3 位分一组；如果最左边（高位）剩下的位数不足 3 位，在 **左边（高位侧）补 0** 。

    从低位向高位划分，高位补

- **小数部分**：从二进制数的 **小数点后第一位（高位）** 开始，向右每 3 位分一组；如果最右边（低位）剩下的位数不足 3 位，在 **右边（低位侧）补 0** 

    小数部分低位补





<img src="C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618142018306.png" alt="image-20250618142018306" style="zoom: 50%;" />

图中是小数转换



![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5586a24cc9076b70895dc628ea9be86a.png)

小数部分权重是负数，从-1开始







真值和机器数

+1

0 0000001

都表示1







## BCD码

 本质是一种编码系统，为的是实现二、十进制快速转换

虽然是十进制数，但运算器按照二进制计算



将基本十进制数字0~9用二进制表示

4 位二进制数来表示 1 位十进制，所以能表示0~9，同时意味着1010到1111都是违法



**类型**

### 有权码

``有权无权的区别是有没有固定位权``



​	8421![image-20250618144637615](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618144637615.png)

**编码（十进制转 BCD 码 ）**

以将十进制数 259 转换为 8421 BCD 码为例：

- 分离十进制位：把 259 按位拆分为 2、5、9 。
- 转换为二进制：将每个十进制数字转成对应的四位二进制数，即 2→0010 、5→0101 、9→1001 。
- 组合编码：把所有四位二进制数按顺序组合，得到 0010 0101 1001 。

**解码（BCD 码转十进制 ）**

以 BCD 码 0010 0101 1001 转换为十进制数为例：

- 分组：按四位二进制数分组，得到 0010、0101、1001 。
- 转换为十进制：将每组四位二进制数转成对应的十进制数字，即 0010→2 、0101→5 、1001→9 。
- 组合十进制数：按顺序组合转换后的十进制数字，得到 259 。



如果结果不在范围内，需要修正，即 结果是10到15，+6 即可：

- 计算 5 + 8（8421 BCD 码运算 ）：
    - 5 的 8421 BCD 码为 0101，8 的为 1000 。
    - 二进制相加：0101 + 1000 = 1101，结果大于 9 。
    - 加 6 修正：1101 + 0110 = 10011，即十进制 13 的 BCD 码，结果正确。
- 计算 8 + 8（8421 BCD 码运算 ）：
    - 8 的 8421 BCD 码为 1000 。
    - 二进制相加：1000 + 1000 = 10000，产生进位 。
    - 加 6 修正：10000 + 0110 = 10110，即十进制 16 的 BCD 码，结果正确。



### 无权码

余3码

8421码+3

余 3 码的自补性，做减法时可以用 **加法代替减法**（取反 + 1 实现补码减法逻辑），简化减法运算

每个十进制数字的 **余 3 码 = 对应 8421 码 + 0011（二进制的 3）**

示例（十进制 → 余 3 码）：

- 十进制 `0`：
    8421 码是 `0000` → 加 `0011` → 余 3 码 `0011`
- 十进制 `5`：
    8421 码是 `0101` → 加 `0011` → 余 3 码 `1000`
- 十进制 `9`：
    8421 码是 `1001` → 加 `0011` → 余 3 码 `1100`







## 校验码

### 奇偶校验码

通过奇偶性确定是否出错

数据中1的个数如果改变了，说明数据出错了

不过也有不足，比如奇校验，如果错完刚好奇个1，就会测不出来

而且测出来错误只知道有错，不知道错哪（因为只有1位校验位，只能表达对错2个状态）



<img src="C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618151203560.png" alt="image-20250618151203560" style="zoom:50%;" />

不符规则，说明数据传输过程中出错了



例

![image-20250618151216143](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618151216143.png)

就是让最高位是校验位，保证1的个数满足奇个或偶个





### 汉明码

将信息位分组偶校验->多个校验位->标注出错误位置

![image-20250618152358734](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618152358734.png)



![image-20250618152409095](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618152409095.png)![image-20250618152413545](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618152413545.png)









# 存储器

1> 随机存储器（RAM）。存储器的任何一个存储单元的内容都可以随机存取，而且存取时间与存取单元的物理位置无关，主要用作主存或高速缓冲存储器。

2> 只读存储器（ROM）。存储器的内容只能随机读出而不能写入。。即使断电，内容也不会丢失。



这个“随机”和物理位置无关，指的是访问任意存储单元时间相同	

![img](https://i-blog.csdnimg.cn/blog_migrate/32b25d182c4e9f948b5ede6e31ab0bb2.png)

![img](https://i-blog.csdnimg.cn/blog_migrate/d679ff8ea252bd55dc150e7192e63007.png)





**设计主存地址以及命中率**

主存地址=标记位（Tag）+索引位（Index/组号）+块内偏移（Offset）

块内偏移由**块大小**决定，索引位由**Cache 分组 / 行数**决定，标记位为地址剩余位。



直接映射方式

















# 总线

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5f28c1c408645a41f366cabf2d34944b.png)







![image-20250618191139208](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618191139208.png)



**总线的特性**

1. 机械特性：尺寸、形状、管脚数、排列顺序
2. 电气特性：传输方向和有效的电平范围
3. 功能特性：每根传输线的功能(地址、数据、控制)
4. 时间特性：信号的时序关系(总线如何有序传输数据)



## 总线分类

### 按数据传输格式

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/aa28f0506eb6694312b7ba056391c81e.png)

串行						并行

—————— 				——————

|	|	|				 |	|	

A	B	C				A	B

​							——————

​							|

​							C

<img src="https://i-blog.csdnimg.cn/blog_migrate/5c157e3e703004587b4b3ae40c2d6a79.png" alt="在这里插入图片描述" style="zoom:50%;" />



### 按功能分

<img src="https://i-blog.csdnimg.cn/blog_migrate/691993456dfbd5d196f1578ff6d85831.png" alt="在这里插入图片描述" style="zoom: 50%;" />

<img src="https://i-blog.csdnimg.cn/blog_migrate/add9b55e065cbcbdceba6a456e1ce8a4.png" alt="在这里插入图片描述" style="zoom:50%;" />

**系统总线的的结构**

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d440bcdc557c02c414b84bc788ae4d8d.png)



![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d211741cd73672cf62ffdbb997bca555.png)

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7ec91e961f65f45b2aa3344eb9de5dbb.png)

相较于双总线，三总线给主存和IO设备间专门分了条线





## 总线的性能指标

1.总线的传输周期（总线周期）(完成一个周期的时间)
2.总线时钟周期	
3.总线的工作频率
4.总线的时钟频率
5.总线宽度
6.总线带宽
7.总线复用
8.信号线数

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/4f2c30261423daf1b9cea64a5b74058b.png)



<img src="C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618200108300.png" alt="image-20250618200108300" style="zoom:50%;" />

![image-20250618200424704](C:\Users\xxx\AppData\Roaming\Typora\typora-user-images\image-20250618200424704.png)

👆总线宽度 = 总线根数*干活总线效率  = 总线根数/总线干活总时长

/8 就是把	位/每秒 换成 字节/每秒

总线带宽默认最高峰速率



 

**总线复用**

总线复用指的是一种信号线在不同时间传输不同信息，从而使用较少的线传输更多的信息，节省空间和成本





## 总线仲裁



![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/76bbead44e42de880714c1947a44320b.png)****



### 集中仲裁

<img src="https://i-blog.csdnimg.cn/blog_migrate/a51a6d236c3a84cbf4e2cf1fe44bf905.png" alt="在这里插入图片描述" style="zoom: 33%;" />

因为链式，所以对硬件电路故障敏感

<img src="https://i-blog.csdnimg.cn/blog_migrate/321650dd4ecbce5a20c107f9f6149cff.png" alt="在这里插入图片描述" style="zoom:33%;" />



<img src="https://i-blog.csdnimg.cn/blog_migrate/49791ebf2550ea87328a5194bb21a3bf.png" alt="在这里插入图片描述" style="zoom:33%;" />









### 分布仲裁









## 总线定时

总线定时是指总线双方在传输数据过程中在时间上配合关系的控制，本质是协议或规则

同步通信		    由统一时钟控制数据传输

异步通信		    采用应答方式

半同步通信		同异步结合

分离式通信		充分挖掘总线每瞬间潜力



其中异步通信的应答方式

不互锁

​	主模块发信息、从模块收信息	都默认对方会收到，过段时间自己撤销不再应答

半互锁

​	主模块发信息，收到应答才撤销请求，从模块收到请求，应答，过段时间自己撤销

全互锁

​	主模块发信息，收到应答才撤请求，从模块收到请求，应答，检测主模块收到请求，才撤销应答









桥接器连接不同总线，具有数据缓冲、转换和控制功能









# 输入输出系统

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/89b312753491f36b57eb397875297794.png)

### I/O接口

实现主机外设通信联络控制

进行地址译码(帮 CPU 精准找到要通信的 I/O 设备端口)和设备选择

数据缓冲

信号格式转换

传输控制命令和状态信息





组成：

内部接口

命令寄存器

命令译码器

设备选择电路

数据缓冲寄存器





























































